---
description: Development rules for the project
globs: 
alwaysApply: true
---

# Referncia pastas #
/docs documentacoes como prd, mdr do projeto
/files arquivos usados para referencia 
/tasks arquivos de todo lists e planejamento de desenvolvimento

# ğŸ“ Regras de Desenvolvimento â€” Calculadora de Impostos (`cursor.rule.md`)

Este documento define as regras obrigatÃ³rias que devem ser seguidas durante o desenvolvimento da aplicaÃ§Ã£o **Calculadora de Impostos para Notas Fiscais**.

---

## âœ… 1. DocumentaÃ§Ã£o com JSDoc

Todas as funÃ§Ãµes devem ser documentadas usando o padrÃ£o **JSDoc**, mesmo as funÃ§Ãµes auxiliares. Isso garante legibilidade, padronizaÃ§Ã£o e suporte a ferramentas automatizadas.

### ğŸ“Œ Exemplo:

```ts
/**
 * Calcula o valor bruto necessÃ¡rio para atingir o valor lÃ­quido apÃ³s os impostos.
 *
 * @param {number} valorLiquido - O valor lÃ­quido que o usuÃ¡rio deseja receber.
 * @param {number} percentualTotal - A soma dos percentuais de impostos aplicÃ¡veis.
 * @returns {number} O valor bruto que deverÃ¡ constar na nota fiscal.
 */
function calcularValorBruto(valorLiquido, percentualTotal) {
  return valorLiquido / (1 - percentualTotal / 100);
}
```

---

## ğŸ³ 2. Uso obrigatÃ³rio de Docker e Docker Compose

A aplicaÃ§Ã£o **deve ser executada via Docker**, utilizando obrigatoriamente um `Dockerfile` e um `docker-compose.yml`. Nenhuma dependÃªncia serÃ¡ instalada diretamente na mÃ¡quina do desenvolvedor.

Comandos de instalacao de dependencias devem ser feitas de dentro do container.

Toda a aplicacao deve ser feita de dentro do container, nao deve ser feita na maquina do desenvolvedor.

### â–¶ï¸ Comando padrÃ£o para execuÃ§Ã£o:

```bash
docker-compose up --build
```

### ğŸ“¦ Exemplo de `docker-compose.yml`:

```yaml
version: "3.8"

services:
  app:
    build: .
    ports:
      - "3000:3000"
    volumes:
      - .:/app
    environment:
      - NODE_ENV=development
    command: sh -c "npm install && npm run dev"
```

### ğŸ‹ Exemplo de `Dockerfile`:

```Dockerfile
FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .

EXPOSE 3000

CMD ["npm", "run", "dev"]
```

---

## ğŸ§ª 3. ValidaÃ§Ã£o com Zod

A validaÃ§Ã£o de **todos os inputs do usuÃ¡rio** deve ser feita com a biblioteca [Zod](https://zod.dev/). NÃ£o utilizar outras bibliotecas como `Yup` ou validaÃ§Ãµes manuais com `if`.

### ğŸ“¦ InstalaÃ§Ã£o:

```bash
npm install zod
```

### ğŸ“Œ Exemplo de schema:

```ts
import { z } from "zod";

const calculoSchema = z.object({
  valorLiquido: z.number().positive(),
  regimeTributario: z.enum(["MEI", "Simples", "LucroPresumido"]),
});

// ValidaÃ§Ã£o
const dados = calculoSchema.parse({
  valorLiquido: 5000,
  regimeTributario: "Simples",
});
```

> ğŸ›¡ï¸ Sempre preferir `.parse()` para validaÃ§Ã£o direta ou `.safeParse()` para tratamento de erros.

---

## ğŸ§­ 4. ConvenÃ§Ãµes Gerais

- A aplicaÃ§Ã£o serÃ¡ feita com **Next.js** (Ãºltima versÃ£o).
- O design serÃ¡ feito com **shadcn/ui** + **TailwindCSS**.
- Todo o cÃ³digo serÃ¡ escrito em **TypeScript**.
- Utilizar padrÃ£o de pastas por **features** (ex: `features/calculadora`, `features/impostos`).
- O cÃ³digo deve passar pelas validaÃ§Ãµes de **ESLint** e **Prettier**.
- A lÃ³gica de cÃ¡lculo dos impostos deve estar isolada em arquivos dentro de `lib/` ou `services/`.

---

## ğŸ“Œ 5. OrganizaÃ§Ã£o por feature
kebab-case para nomes de pastas e arquivos.
camelCase para nomes de variaveis e funcoes.
PascalCase para nomes de classes e interfaces.


## ğŸ“Œ Resumo

| Requisito                      | ObrigatÃ³rio? | ObservaÃ§Ã£o                                  |
|-------------------------------|--------------|----------------------------------------------|
| JSDoc para todas as funÃ§Ãµes   | âœ…           | Sempre usar                                  |
| Docker e Docker Compose       | âœ…           | Nada de `npm install` local                  |
| ValidaÃ§Ã£o com Zod             | âœ…           | Nunca usar `Yup`, `Joi`, etc.                |
| Next.js + shadcn/ui           | âœ…           | Ãšltima versÃ£o                                |
| TypeScript                    | âœ…           | PadrÃ£o em todos os arquivos                  |
| ESLint + Prettier             | âœ…           | Para padronizaÃ§Ã£o de cÃ³digo                  |
| OrganizaÃ§Ã£o por feature       | âœ…           | Arquitetura escalÃ¡vel                        |

---

_Fim do arquivo._